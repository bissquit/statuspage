# Roadmap — StatusPage Service

**Дата:** 2026-01-21  
**Статус:** MVP в разработке

---

## Приоритет 1: Завершение MVP

**Срок:** 1-2 недели

### 1.1 Доделать Notifications модуль

| Задача                         | Сложность | Описание                                                                  |
|--------------------------------|-----------|---------------------------------------------------------------------------|
| Email sender (SMTP)            | M         | Реализовать отправку через SMTP с конфигурацией через ENV                 |
| Telegram sender                | M         | Реализовать отправку через Telegram Bot API                               |
| Интеграция dispatcher с events | S         | Вызывать dispatcher при создании event/update с `notify_subscribers=true` |
| Верификация email              | M         | Отправка кода подтверждения, эндпоинт верификации                         |
| Верификация telegram           | M         | Deep link для подтверждения, webhook от бота                              |

**Результат:** пользователи получают реальные уведомления о событиях

### 1.2 Dockerfile и базовый деплой

| Задача                   | Сложность | Описание                                |
|--------------------------|-----------|-----------------------------------------|
| Multi-stage Dockerfile   | S         | Сборка + минимальный runtime образ      |
| docker-compose.prod.yml  | S         | Compose файл с приложением + PostgreSQL |
| Документация по деплою   | S         | README с инструкциями для production    |
| GitHub Actions release   | M         | Сборка и push образа в registry при tag |

**Результат:** можно задеплоить сервис одной командой

---

## Приоритет 2: Production-readiness

**Срок:** 2-3 недели

### 2.1 Observability

| Задача                 | Сложность | Описание                                                                           |
|------------------------|-----------|------------------------------------------------------------------------------------|
| Prometheus метрики     | M         | `http_requests_total`, `http_request_duration_seconds`, `notifications_sent_total` |
| Correlation ID         | S         | Request ID в логах для трейсинга запросов                                          |
| Улучшенное логирование | S         | Структурированные логи с контекстом операций                                       |

**Результат:** можно мониторить и отлаживать production

### 2.2 API improvements

| Задача                   | Сложность | Описание                                                    |
|--------------------------|-----------|-------------------------------------------------------------|
| OpenAPI 3.0 спецификация | M         | Полное описание API в `api/openapi/openapi.yaml`            |
| Пагинация                | M         | `?page=1&per_page=20` для `/events`, `/services`, `/groups` |
| Rate limiting            | M         | Ограничение запросов по IP/user                             |
| Фильтрация событий       | S         | `?type=incident&status=resolved&service_id=xxx`             |

**Результат:** API готов для production нагрузки

### 2.3 Helm Chart

| Задача          | Сложность | Описание                               |
|-----------------|-----------|----------------------------------------|
| Базовый чарт    | M         | Deployment, Service, ConfigMap, Secret |
| Ingress         | S         | Конфигурируемый ingress с TLS          |
| HPA             | S         | Horizontal Pod Autoscaler              |
| README для Helm | S         | Документация по установке и настройке  |

**Результат:** `helm install statuspage ./helm/statuspage`

---

## Приоритет 3: Расширение функциональности

**Срок:** по необходимости

### 3.1 Автоматизация статусов

| Задача              | Сложность | Описание                                                                         |
|---------------------|-----------|----------------------------------------------------------------------------------|
| Авто-статус сервиса | M         | При создании incident автоматически менять статус связанных сервисов             |
| Incoming webhooks   | L         | Эндпоинт для получения событий от внешних систем (Prometheus Alertmanager, etc.) |
| Scheduled jobs      | M         | Автоматический старт/завершение scheduled maintenance                            |

### 3.2 Улучшение UX

| Задача        | Сложность | Описание                         |
|---------------|-----------|----------------------------------|
| RSS/Atom feed | S         | Публичный feed событий           |
| Status badge  | S         | Embeddable SVG badge для README  |
| iCal calendar | M         | Календарь scheduled maintenance  |
| Email digest  | M         | Периодическая сводка по подписке |

### 3.3 Безопасность

| Задача        | Сложность | Описание                               |
|---------------|-----------|----------------------------------------|
| API Keys      | M         | Токены для интеграций без user context |
| OIDC/Keycloak | L         | SSO через внешний Identity Provider    |
| Audit log     | M         | Логирование всех изменений с автором   |
| 2FA           | L         | Двухфакторная аутентификация для admin |

---

## Легенда сложности

| Метка | Описание    | Примерное время |
|-------|-------------|-----------------|
| S     | Small       | 2-4 часа        |
| M     | Medium      | 0.5-1 день      |
| L     | Large       | 2-3 дня         |
| XL    | Extra Large | 1 неделя+       |

---

## Технический долг

| Задача                                 | Приоритет | Описание                                 |
|----------------------------------------|-----------|------------------------------------------|
| Graceful degradation для notifications | Средний   | Не падать если sender недоступен         |
| Транзакции в repository                | Низкий    | Обернуть связанные операции в транзакции |
| Кеширование                            | Низкий    | Redis для публичных эндпоинтов           |
| E2E тесты                              | Средний   | Полные сценарии через HTTP               |
| Нагрузочное тестирование               | Низкий    | k6 или similar                           |

---

## Не планируется (out of scope)

- Web UI (отдельный проект)
- Mobile приложение
- Multi-tenancy
- GraphQL API
- Поддержка других БД кроме PostgreSQL
